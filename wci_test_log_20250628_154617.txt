2025-06-28 13:46:17,962 - DEBUG - Starting main execution
2025-06-28 13:46:17,962 - DEBUG - Starting briefing generation
2025-06-28 13:46:17,962 - DEBUG - Loading WCI cache from /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/wci_cache.json
2025-06-28 13:46:17,962 - DEBUG - Successfully loaded WCI cache: {'19.06.2025': {'value': 3279.0}, '26.06.2025': {'value': 2983.0}}
2025-06-28 13:46:17,962 - DEBUG - Loading IACI cache from /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/iaci_cache.json
2025-06-28 13:46:17,962 - ERROR - Failed to load or create IACI cache: Expecting property name enclosed in double quotes: line 8 column 1 (char 86)
2025-06-28 13:46:17,962 - DEBUG - Saving IACI cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/iaci_cache.json: {}
2025-06-28 13:46:17,963 - INFO - Successfully wrote IACI cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/iaci_cache.json
2025-06-28 13:46:17,963 - DEBUG - IACI cache file content after save: {}
2025-06-28 13:46:17,963 - DEBUG - Starting WCI email fetch
2025-06-28 13:46:17,963 - DEBUG - Gmail user: hadobrockmeyer@gmail.com, pass: ****************
2025-06-28 13:46:19,402 - DEBUG - SELECT inbox result: OK, data: [b'7957']
2025-06-28 13:46:19,402 - DEBUG - Searching WCI emails with criteria: FROM noreply@drewry.co.uk World Container Index SINCE 21-Jun-2025
2025-06-28 13:46:19,635 - ERROR - Primary WCI search failed: SEARCH command error: BAD [b'Could not parse command'], trying fallback search
2025-06-28 13:46:19,635 - DEBUG - Fallback WCI search with criteria: FROM noreply@drewry.co.uk SINCE 21-Jun-2025
2025-06-28 13:46:19,860 - DEBUG - Fallback SEARCH result: OK, data: [b'7904']
2025-06-28 13:46:19,860 - DEBUG - Found WCI email IDs: [b'7904']
2025-06-28 13:46:20,126 - DEBUG - WCI email ID b'7904' subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-28 13:46:20,126 - DEBUG - Fetching WCI email ID: b'7904'
2025-06-28 13:46:20,127 - DEBUG - Saving WCI HTML content to wci_email_7904.html
2025-06-28 13:46:20,127 - INFO - Successfully saved WCI email content to wci_email_7904.html
2025-06-28 13:46:20,291 - DEBUG - Attempting to read WCI HTML file: wci_email_7904.html
2025-06-28 13:46:20,298 - DEBUG - Extracted WCI text (first 500 chars): Drewry World Container Index - Weekly assessmentDear Hado26 June 2025World Container Index - 26 Jun26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.Read moreContainer Freight Rate Insight - spot rates against 6,300 global lanesTrusted by many of the world's leading brands- Search rates across 6,300 global port pairs- All lanes updated monthly (top 1,900 lanes updated fortnightly)- Monthly Insight report, providing commentary and analysis of key mark
2025-06-28 13:46:20,303 - INFO - Extracted WCI: 2983.00, Date: 26.06.2025
2025-06-28 13:46:20,304 - DEBUG - WCI cache entry for 26.06.2025 already exists, skipping save
2025-06-28 13:46:20,304 - DEBUG - Starting IACI email fetch
2025-06-28 13:46:20,304 - DEBUG - Gmail user: hadobrockmeyer@gmail.com, pass: ****************
2025-06-28 13:46:21,141 - DEBUG - SELECT inbox result: OK, data: [b'7957']
2025-06-28 13:46:21,141 - DEBUG - Searching IACI emails with criteria: FROM noreply@drewry.co.uk Intra-Asia Container Index SINCE 08-Jun-2025
2025-06-28 13:46:21,310 - ERROR - Primary IACI search failed: SEARCH command error: BAD [b'Could not parse command'], trying fallback search
2025-06-28 13:46:21,310 - DEBUG - Fallback IACI search with criteria: FROM noreply@drewry.co.uk SINCE 08-Jun-2025
2025-06-28 13:46:21,560 - DEBUG - Fallback SEARCH result: OK, data: [b'7650 7737 7784 7904']
2025-06-28 13:46:21,560 - DEBUG - Found IACI email IDs: [b'7650', b'7737', b'7784', b'7904']
2025-06-28 13:46:21,820 - DEBUG - IACI email ID b'7904' subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-28 13:46:22,067 - DEBUG - IACI email ID b'7784' subject: Drewry World Container Index: Thursday, 19 June 2025
2025-06-28 13:46:22,347 - DEBUG - IACI email ID b'7737' subject: Intra-Asia Container Index and Trade Route Analysis: 16 June 2025
2025-06-28 13:46:22,348 - DEBUG - Fetching IACI email ID: b'7737'
2025-06-28 13:46:22,348 - DEBUG - Saving IACI HTML content to iaci_email_7737.html
2025-06-28 13:46:22,348 - INFO - Successfully saved IACI email content to iaci_email_7737.html
2025-06-28 13:46:22,527 - DEBUG - Attempting to read IACI HTML file: iaci_email_7737.html
2025-06-28 13:46:22,533 - DEBUG - Extracted IACI text (first 500 chars): Intra-Asia Container Index - 16 June 2025 (updated fortnightly)Dear Hado,17 June 2025Intra-Asia Container Index - 16 Jun16 Jun 2025: Drewryâ€™s new Intra-Asia Container Index, a weighted average of spot container freight rates, increased 8% to $707 per 40ft container in the first half of June.Read moreKind regards,Drewry Customer Services TeamT: +44 20 7538 0191Â  Â  Â  Â E: enquiries@drewry.co.ukÂ© Copyright 2025 | All Rights ReservedDrewry Shipping Consultants LimitedClickhereto unsubscribe.
2025-06-28 13:46:22,533 - INFO - Extracted IACI: 707.00, Date: 16.06.2025
2025-06-28 13:46:22,533 - DEBUG - Saving IACI cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/iaci_cache.json: {'16.06.2025': {'value': 707.0}}
2025-06-28 13:46:22,533 - INFO - Successfully wrote IACI cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/freight_indicies/iaci_cache.json
2025-06-28 13:46:22,533 - DEBUG - IACI cache file content after save: {
  "16.06.2025": {
    "value": 707.0
  }
}
2025-06-28 13:46:22,534 - DEBUG - Report content:
Daily China Briefing - 28 Jun 2025
==================================================
## ðŸš¢ Frachtraten Indizies
â€¢ WCI: 2983.00 (â†“ -9.03%) (Stand 26.06.2025)
â€¢ IACI: 707.00 (Stand 16.06.2025)

2025-06-28 13:46:22,534 - INFO - Saved briefing to daily_briefing.md
2025-06-28 13:46:22,534 - DEBUG - Starting email sending
2025-06-28 13:46:22,535 - DEBUG - Attaching file: wci_test_log_20250628_154617.txt
2025-06-28 13:46:22,535 - DEBUG - Attaching file: daily_briefing.md
2025-06-28 13:46:22,535 - DEBUG - Attaching file: freight_indicies/wci_cache.json
2025-06-28 13:46:22,535 - DEBUG - Attaching file: freight_indicies/iaci_cache.json
2025-06-28 13:46:22,535 - DEBUG - Attaching file: wci_email_7904.html
2025-06-28 13:46:22,536 - DEBUG - Attaching file: iaci_email_7904.html
2025-06-28 13:46:22,536 - DEBUG - Attaching file: iaci_email_7737.html
2025-06-28 13:46:24,782 - INFO - Email sent successfully
2025-06-28 13:46:24,782 - DEBUG - Main execution completed
