2025-06-26 17:17:18,284 - DEBUG - Starting main execution
2025-06-26 17:17:18,284 - DEBUG - Starting test_wci_email script
2025-06-26 17:17:18,284 - DEBUG - DREWRY environment variable: GMAIL_USER=hadobrockmeyer@gmail.com;GMAIL_PASS=bncxnogntqjancpi
2025-06-26 17:17:18,284 - DEBUG - Successfully parsed DREWRY secret: GMAIL_USER=hadobrockmeyer@gmail.com, GMAIL_PASS=****************
2025-06-26 17:17:18,284 - DEBUG - Attempting to connect to Gmail IMAP server (imap.gmail.com:993)
2025-06-26 17:17:18,386 - DEBUG - Connecting to Gmail with user: hadobrockmeyer@gmail.com
2025-06-26 17:17:19,239 - DEBUG - Successfully logged in to Gmail
2025-06-26 17:17:19,401 - DEBUG - Selected INBOX folder
2025-06-26 17:17:19,401 - DEBUG - Executing IMAP search query: FROM noreply@drewry.co.uk SINCE 23-Jun-2025
2025-06-26 17:17:19,634 - DEBUG - Found 1 email IDs: [b'7904']
2025-06-26 17:17:20,085 - DEBUG - Email ID b'7904': Subject='Drewry World Container Index: Thursday, 26 June 2025', Date='Thu, 26 Jun 2025 15:50:22 +0000', From='Drewry Shipping Consultants <noreply@drewry.co.uk>', Parsed Date=2025-06-26 15:50:22+00:00
2025-06-26 17:17:20,085 - DEBUG - Sorted 1 emails by date (newest first): ["ID=b'7904', Date=2025-06-26 15:50:22+00:00, Subject=Drewry World Container Index: Thursday, 26 June 2025"]
2025-06-26 17:17:20,085 - DEBUG - Processing newest email ID b'7904': Subject='Drewry World Container Index: Thursday, 26 June 2025', Date='2025-06-26 15:50:22+00:00', From='Drewry Shipping Consultants <noreply@drewry.co.uk>'
2025-06-26 17:17:20,318 - DEBUG - Found HTML content in multipart email
2025-06-26 17:17:20,318 - DEBUG - Saved HTML for mail b'7904' to wci_email_7904.html
2025-06-26 17:17:20,318 - DEBUG - Email HTML content (first 500 chars): <!doctype html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"><head><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&family=Roboto:ital
2025-06-26 17:17:20,318 - INFO - Successfully processed newest Drewry email: ID=b'7904', Subject='Drewry World Container Index: Thursday, 26 June 2025', Date='2025-06-26 15:50:22+00:00'
2025-06-26 17:17:20,458 - DEBUG - Logged out from Gmail
2025-06-26 17:17:20,458 - DEBUG - Test execution completed
2025-06-26 17:56:29,284 - DEBUG - Starting main execution
2025-06-26 17:56:29,284 - DEBUG - Starting email fetch
2025-06-26 17:56:29,284 - DEBUG - Connecting to Gmail IMAP
2025-06-26 17:56:30,233 - DEBUG - Searching emails with criteria: (FROM "noreply@drewry.co.uk" ON "26-Jun-2025")
2025-06-26 17:56:30,373 - DEBUG - Fetching email ID: b'7904'
2025-06-26 17:56:30,555 - DEBUG - Email subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-26 17:56:30,556 - DEBUG - Saving HTML content to wci_email_7904.html
2025-06-26 17:56:30,556 - INFO - Successfully saved email content to wci_email_7904.html
2025-06-26 17:56:30,670 - DEBUG - Starting briefing generation
2025-06-26 17:56:30,671 - DEBUG - Using latest HTML file: wci_email_7904.html
2025-06-26 17:56:30,671 - DEBUG - Attempting to read HTML file: wci_email_7904.html
2025-06-26 17:56:30,678 - DEBUG - Found WCI text: 26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.
2025-06-26 17:56:30,678 - INFO - Extracted WCI: $2,983, Change: decreased 9%
2025-06-26 17:56:30,678 - INFO - Generated briefing report
2025-06-26 17:56:30,678 - DEBUG - Report content:
Daily China Briefing - 26 Jun 2025
==================================================
World Container Index
--------------------
WCI: $2,983, decreased 9% w/w
--------------------
[Weitere Inhalte hier einfÃ¼gen]

2025-06-26 17:56:30,678 - INFO - Saved briefing to daily_briefing.md
2025-06-26 17:56:30,678 - DEBUG - Starting email sending
2025-06-26 17:56:30,679 - DEBUG - Attaching file: wci_test_log.txt
2025-06-26 17:56:30,679 - DEBUG - Attaching file: daily_briefing.md
2025-06-26 17:56:30,679 - DEBUG - Attaching file: wci_email_7904.html
2025-06-26 17:56:32,304 - INFO - Email sent successfully
2025-06-26 17:56:32,304 - DEBUG - Main execution completed
2025-06-26 20:52:25,372 - DEBUG - Starting main execution
2025-06-26 20:52:25,372 - DEBUG - Starting email fetch
2025-06-26 20:52:25,373 - DEBUG - Connecting to Gmail IMAP
2025-06-26 20:52:26,384 - DEBUG - Searching emails with criteria: (FROM "noreply@drewry.co.uk" ON "26-Jun-2025")
2025-06-26 20:52:26,653 - DEBUG - Fetching email ID: b'7904'
2025-06-26 20:52:26,953 - DEBUG - Email subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-26 20:52:26,953 - DEBUG - Saving HTML content to wci_email_7904.html
2025-06-26 20:52:26,954 - INFO - Successfully saved email content to wci_email_7904.html
2025-06-26 20:52:27,134 - DEBUG - Starting briefing generation
2025-06-26 20:52:27,134 - DEBUG - Using latest HTML file: wci_email_7904.html
2025-06-26 20:52:27,135 - DEBUG - Attempting to read HTML file: wci_email_7904.html
2025-06-26 20:52:27,142 - DEBUG - Found WCI text: 26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.
2025-06-26 20:52:27,142 - INFO - Extracted WCI: $2,983, Change: decreased 9%
2025-06-26 20:52:27,142 - DEBUG - Starting news fetch
2025-06-26 20:52:27,848 - INFO - Fetched 3 news items
2025-06-26 20:52:27,848 - INFO - Generated briefing report
2025-06-26 20:52:27,849 - DEBUG - Report content:
Daily China Briefing - 26 Jun 2025
==================================================
World Container Index
--------------------
WCI: $2,983, decreased 9% w/w
--------------------
News
--------------------
- China has begun issuing rare earth export licences to European firms: EU sources (Thu, 26 Jun 2025 17:35:32 +0000): https://www.scmp.com/news/china/science/article/3315999/china-has-begun-issuing-rare-earth-export-licenses-european-firms-eu-sources-say?utm_source=rss_feed
- Chinese energy firms say Brazil must clarify rules or face loss of investments (Thu, 26 Jun 2025 17:31:12 +0000): https://www.scmp.com/news/china/article/3315998/chinese-energy-firms-say-brazil-must-clarify-regulations-or-face-loss-investments?utm_source=rss_feed
- Carmakers GM, Tesla and Ford lead list of US companies in China exposure: report (Thu, 26 Jun 2025 16:33:47 +0000): https://www.scmp.com/news/china/article/3315994/carmakers-gm-tesla-and-ford-lead-list-us-companies-china-exposure-report?utm_source=rss_feed


2025-06-26 20:52:27,849 - INFO - Saved briefing to daily_briefing.md
2025-06-26 20:52:27,849 - DEBUG - Starting email sending
2025-06-26 20:52:27,849 - DEBUG - Attaching file: wci_test_log.txt
2025-06-26 20:52:27,849 - DEBUG - Attaching file: daily_briefing.md
2025-06-26 20:52:27,849 - DEBUG - Attaching file: wci_email_7904.html
2025-06-26 20:52:29,787 - INFO - Email sent successfully
2025-06-26 20:52:29,787 - DEBUG - Main execution completed
2025-06-26 21:02:52,894 - DEBUG - Starting main execution
2025-06-26 21:02:52,894 - DEBUG - Starting briefing generation
2025-06-26 21:02:52,894 - DEBUG - Loading cache from /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:02:52,894 - DEBUG - No cache file found at /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:02:52,894 - DEBUG - Starting email fetch
2025-06-26 21:02:52,894 - DEBUG - Gmail user: hadobrockmeyer@gmail.com, pass: ****************
2025-06-26 21:02:52,894 - DEBUG - Connecting to Gmail IMAP
2025-06-26 21:02:54,025 - DEBUG - Searching emails with criteria: (FROM "noreply@drewry.co.uk" ON "26-Jun-2025")
2025-06-26 21:02:54,191 - DEBUG - Fetching email ID: b'7904'
2025-06-26 21:02:54,622 - DEBUG - Email subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-26 21:02:54,622 - DEBUG - Saving HTML content to wci_email_7904.html
2025-06-26 21:02:54,623 - INFO - Successfully saved email content to wci_email_7904.html
2025-06-26 21:02:54,759 - DEBUG - Attempting to read HTML file: wci_email_7904.html
2025-06-26 21:02:54,769 - DEBUG - Extracted text (first 500 chars): Drewry World Container Index - Weekly assessmentDear Hado26 June 2025World Container Index - 26 Jun26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.Read moreContainer Freight Rate Insight - spot rates against 6,300 global lanesTrusted by many of the world's leading brands- Search rates across 6,300 global port pairs- All lanes updated monthly (top 1,900 lanes updated fortnightly)- Monthly Insight report, providing commentary and analysis of key mark
2025-06-26 21:02:54,824 - INFO - Extracted WCI: 2983.00, Date: 26.06.2025
2025-06-26 21:02:54,824 - DEBUG - Saving cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json: {'2025-06-26': {'value': 2983.0, 'api_date': '26.06.2025'}}
2025-06-26 21:02:54,824 - INFO - Successfully wrote cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:02:54,824 - INFO - Generated briefing report
2025-06-26 21:02:54,824 - DEBUG - Report content:
Daily China Briefing - 26 Jun 2025
==================================================
## ðŸš¢ Frachtraten Indizies
â€¢ WCI: 2983.00 (Stand 26.06.2025)

2025-06-26 21:02:54,824 - INFO - Saved briefing to daily_briefing.md
2025-06-26 21:02:54,824 - DEBUG - Starting email sending
2025-06-26 21:02:54,825 - DEBUG - Attaching file: wci_test_log.txt
2025-06-26 21:02:54,825 - DEBUG - Attaching file: daily_briefing.md
2025-06-26 21:02:54,825 - DEBUG - Attaching file: WCI/wci_cache.json
2025-06-26 21:02:54,825 - DEBUG - Attaching file: wci_email_7904.html
2025-06-26 21:02:56,873 - INFO - Email sent successfully
2025-06-26 21:02:56,873 - DEBUG - Main execution completed
2025-06-26 21:19:07,180 - DEBUG - Starting main execution
2025-06-26 21:19:07,180 - DEBUG - Starting briefing generation
2025-06-26 21:19:07,180 - DEBUG - Loading cache from /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:19:07,180 - DEBUG - Successfully loaded cache: {'2025-06-26': {'value': 2983.0, 'api_date': '26.06.2025'}}
2025-06-26 21:19:07,180 - DEBUG - Starting email fetch
2025-06-26 21:19:07,180 - DEBUG - Gmail user: hadobrockmeyer@gmail.com, pass: ****************
2025-06-26 21:19:08,504 - DEBUG - Searching emails with criteria: (FROM "noreply@drewry.co.uk" ON "26-Jun-2025")
2025-06-26 21:19:08,708 - DEBUG - Fetching email ID: b'7904'
2025-06-26 21:19:09,017 - DEBUG - Email subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-26 21:19:09,017 - DEBUG - Saving HTML content to wci_email_7904.html
2025-06-26 21:19:09,018 - INFO - Successfully saved email content to wci_email_7904.html
2025-06-26 21:19:09,196 - DEBUG - Attempting to read HTML file: wci_email_7904.html
2025-06-26 21:19:09,203 - DEBUG - Extracted text (first 500 chars): Drewry World Container Index - Weekly assessmentDear Hado26 June 2025World Container Index - 26 Jun26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.Read moreContainer Freight Rate Insight - spot rates against 6,300 global lanesTrusted by many of the world's leading brands- Search rates across 6,300 global port pairs- All lanes updated monthly (top 1,900 lanes updated fortnightly)- Monthly Insight report, providing commentary and analysis of key mark
2025-06-26 21:19:09,216 - INFO - Extracted WCI: 2983.00, Date: 26.06.2025
2025-06-26 21:19:09,217 - DEBUG - Saving cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json: {'2025-06-26': {'value': 2983.0, 'email_date': '26.06.2025'}}
2025-06-26 21:19:09,217 - INFO - Successfully wrote cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:19:09,217 - DEBUG - Report content:
Daily China Briefing - 26 Jun 2025
==================================================
## ðŸš¢ Frachtraten Indizies
â€¢ WCI: 2983.00 (Stand 26.06.2025)

2025-06-26 21:19:09,217 - INFO - Saved briefing to daily_briefing.md
2025-06-26 21:19:09,217 - DEBUG - Starting email sending
2025-06-26 21:19:09,217 - DEBUG - Attaching file: wci_test_log.txt
2025-06-26 21:19:09,218 - DEBUG - Attaching file: daily_briefing.md
2025-06-26 21:19:09,218 - DEBUG - Attaching file: WCI/wci_cache.json
2025-06-26 21:19:09,218 - DEBUG - Attaching file: wci_email_7904.html
2025-06-26 21:19:11,176 - INFO - Email sent successfully
2025-06-26 21:19:11,176 - DEBUG - Main execution completed
2025-06-26 21:24:24,005 - DEBUG - Starting main execution
2025-06-26 21:24:24,005 - DEBUG - Starting briefing generation
2025-06-26 21:24:24,005 - DEBUG - Loading cache from /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:24:24,005 - DEBUG - Successfully loaded cache: {'2025-06-26': {'value': 2983.0, 'email_date': '26.06.2025'}}
2025-06-26 21:24:24,005 - DEBUG - Starting email fetch
2025-06-26 21:24:24,005 - DEBUG - Gmail user: hadobrockmeyer@gmail.com, pass: ****************
2025-06-26 21:24:24,702 - DEBUG - Searching emails with criteria: (FROM "noreply@drewry.co.uk" ON "26-Jun-2025")
2025-06-26 21:24:24,917 - DEBUG - Fetching email ID: b'7904'
2025-06-26 21:24:25,406 - DEBUG - Email subject: Drewry World Container Index: Thursday, 26 June 2025
2025-06-26 21:24:25,407 - DEBUG - Saving HTML content to wci_email_7904.html
2025-06-26 21:24:25,407 - INFO - Successfully saved email content to wci_email_7904.html
2025-06-26 21:24:25,580 - DEBUG - Attempting to read HTML file: wci_email_7904.html
2025-06-26 21:24:25,587 - DEBUG - Extracted text (first 500 chars): Drewry World Container Index - Weekly assessmentDear Hado26 June 2025World Container Index - 26 Jun26 Jun 2025: Drewryâ€™s World Container Index decreased 9% to $2,983 per 40ft container this week.Read moreContainer Freight Rate Insight - spot rates against 6,300 global lanesTrusted by many of the world's leading brands- Search rates across 6,300 global port pairs- All lanes updated monthly (top 1,900 lanes updated fortnightly)- Monthly Insight report, providing commentary and analysis of key mark
2025-06-26 21:24:25,650 - INFO - Extracted WCI: 2983.00, Date: 26.06.2025
2025-06-26 21:24:25,650 - DEBUG - Saving cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json: {'2025-06-26': {'value': 2983.0, 'email_date': '26.06.2025'}}
2025-06-26 21:24:25,650 - INFO - Successfully wrote cache to /home/runner/work/-daily-china-briefing-test/-daily-china-briefing-test/WCI/wci_cache.json
2025-06-26 21:24:25,650 - DEBUG - Cache file content after save: {
  "2025-06-26": {
    "value": 2983.0,
    "email_date": "26.06.2025"
  }
}
2025-06-26 21:24:25,650 - DEBUG - Report content:
Daily China Briefing - 26 Jun 2025
==================================================
## ðŸš¢ Frachtraten Indizies
â€¢ WCI: 2983.00 (Stand 26.06.2025)

2025-06-26 21:24:25,650 - INFO - Saved briefing to daily_briefing.md
2025-06-26 21:24:25,651 - DEBUG - Starting email sending
2025-06-26 21:24:25,651 - DEBUG - Attaching file: wci_test_log.txt
2025-06-26 21:24:25,651 - DEBUG - Attaching file: daily_briefing.md
2025-06-26 21:24:25,651 - DEBUG - Attaching file: WCI/wci_cache.json
2025-06-26 21:24:25,652 - DEBUG - Attaching file: wci_email_7904.html
2025-06-26 21:24:27,530 - INFO - Email sent successfully
2025-06-26 21:24:27,530 - DEBUG - Main execution completed
